# terrahash

Create and store a hash of the Terraform modules used by your configuration

## What is it?

TerraHash is a command-line tool which will evaluate your Terraform configuration after it has been initialized and generate hashes of the modules used by the configuration. The hash and version constraints will be stored in a file called `.terraform.module.hcl` similar to how the providers used are stored in `.terraform.lock.hcl`.

The hashes generated by `terrahash` will be compared against the contents of the `.terraform.module.hcl` file (if found) and if will flag if any of the module hashes, versions, or constraint have been changed. This can ensure that only approved and vetted modules are used during deployment.

If a user wishes to upgrade the version of a module, they can do so with a flag.

Terra Hash is meant to be integrated into a CI process. It may be extended to providers at some point as well.

## Using TerraHash

There are three essential commands for `terrahash`:

* `terrahash init` - will evaluate the current configuration and generate a `.terraform.module.hcl` file. It will error out if the Terraform configuration has not yet been initialized.
* `terrahash check` - will evaluate the current configuration against the `.terraform.module.hcl` file and report on any changes for each module. It will error out if the `.terraform.module.hcl` file is not found.
* `terrahash upgrade` - will update the `.terraform.module.hcl` file based on the contents of the configuration. You can target a specific module with the `-module=MODULE_SOURCE` flag, which can be repeated multiple times.
